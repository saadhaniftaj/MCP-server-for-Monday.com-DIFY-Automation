<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monday.com MCP Server Demo</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        .status {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        .endpoint {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .endpoint h3 {
            color: #495057;
            margin-top: 0;
        }
        .endpoint pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 14px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .result {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin-top: 10px;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 12px;
        }
        .mcp-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .direct-section {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Monday.com MCP Server Demo</h1>
        
        <div class="status">
            <h2>‚úÖ Server Status: ONLINE</h2>
            <p>Railway URL: <strong>https://mcp-server-for-mondaycom-dify-automation-production.up.railway.app/</strong></p>
            <p>All endpoints are working correctly!</p>
        </div>

        <div class="note">
            <h3>üìù Note: Dify.ai Platform Issues</h3>
            <p>Dify.ai is currently experiencing authentication and API issues (401/400 errors). This demo showcases the MCP server functionality independently.</p>
        </div>

        <div class="mcp-section">
            <h2>üîß MCP Protocol Endpoints</h2>
            <p>These endpoints follow the Model Context Protocol (MCP) specification for AI agent integration.</p>

            <div class="endpoint">
                <h3>1. Initialize MCP Server</h3>
                <pre>POST /
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "initialize"
}</pre>
                <button class="test-button" onclick="testInitialize()">Test Initialize</button>
                <div id="initialize-result" class="result" style="display: none;"></div>
            </div>

            <div class="endpoint">
                <h3>2. List Available Tools</h3>
                <pre>POST /
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "tools/list"
}</pre>
                <button class="test-button" onclick="testToolsList()">Test Tools List</button>
                <div id="tools-result" class="result" style="display: none;"></div>
            </div>

            <div class="endpoint">
                <h3>3. Call Monday.com Email Updater Tool</h3>
                <pre>POST /
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "tools/call",
  "params": {
    "name": "monday_email_updater",
    "arguments": {
      "itemName": "Test Task",
      "email": "test@example.com"
    }
  }
}</pre>
                <button class="test-button" onclick="testEmailUpdate()">Test Email Update</button>
                <div id="email-result" class="result" style="display: none;"></div>
            </div>
        </div>

        <div class="direct-section">
            <h2>üåê Direct HTTP Endpoints</h2>
            <p>These endpoints bypass MCP and provide direct Monday.com functionality.</p>

            <div class="endpoint">
                <h3>1. Update Email (Direct HTTP)</h3>
                <pre>POST /api/monday/update-email
{
  "itemName": "Test Task",
  "email": "test@example.com"
}</pre>
                <button class="test-button" onclick="testDirectEmail()">Test Direct Email Update</button>
                <div id="direct-email-result" class="result" style="display: none;"></div>
            </div>

            <div class="endpoint">
                <h3>2. Search Items (Direct HTTP)</h3>
                <pre>POST /api/monday/search-items
{
  "boardId": 123,
  "term": "test"
}</pre>
                <button class="test-button" onclick="testDirectSearch()">Test Direct Search</button>
                <div id="direct-search-result" class="result" style="display: none;"></div>
            </div>

            <div class="endpoint">
                <h3>3. Update Column (Direct HTTP)</h3>
                <pre>POST /api/monday/update-column
{
  "boardId": 123,
  "itemId": 456,
  "columnValues": "{\"status\": \"done\"}"
}</pre>
                <button class="test-button" onclick="testDirectColumn()">Test Direct Column Update</button>
                <div id="direct-column-result" class="result" style="display: none;"></div>
            </div>

            <div class="endpoint">
                <h3>4. Get Board Schema (Direct HTTP)</h3>
                <pre>GET /api/monday/board-schema/123</pre>
                <button class="test-button" onclick="testDirectSchema()">Test Direct Schema</button>
                <div id="direct-schema-result" class="result" style="display: none;"></div>
            </div>
        </div>

        <div class="note">
            <h3>üéØ Demo Instructions</h3>
            <p>1. Click any "Test" button to see the server response</p>
            <p>2. The MCP endpoints are for AI agent integration (like Dify.ai)</p>
            <p>3. The Direct HTTP endpoints can be used in any application</p>
            <p>4. All responses are mocked for demonstration purposes</p>
        </div>
    </div>

    <script>
        const SERVER_URL = 'https://mcp-server-for-mondaycom-dify-automation-production.up.railway.app';

        async function makeRequest(endpoint, method = 'POST', body = null) {
            try {
                const options = {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json'
                    }
                };
                
                if (body) {
                    options.body = JSON.stringify(body);
                }

                const response = await fetch(SERVER_URL + endpoint, options);
                const result = await response.text();
                
                return {
                    status: response.status,
                    statusText: response.statusText,
                    body: result
                };
            } catch (error) {
                return {
                    error: error.message
                };
            }
        }

        function showResult(elementId, result) {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            element.textContent = JSON.stringify(result, null, 2);
        }

        async function testInitialize() {
            const result = await makeRequest('/', 'POST', {
                jsonrpc: "2.0",
                id: 1,
                method: "initialize"
            });
            showResult('initialize-result', result);
        }

        async function testToolsList() {
            const result = await makeRequest('/', 'POST', {
                jsonrpc: "2.0",
                id: 1,
                method: "tools/list"
            });
            showResult('tools-result', result);
        }

        async function testEmailUpdate() {
            const result = await makeRequest('/', 'POST', {
                jsonrpc: "2.0",
                id: 1,
                method: "tools/call",
                params: {
                    name: "monday_email_updater",
                    arguments: {
                        itemName: "Test Task",
                        email: "test@example.com"
                    }
                }
            });
            showResult('email-result', result);
        }

        async function testDirectEmail() {
            const result = await makeRequest('/api/monday/update-email', 'POST', {
                itemName: "Test Task",
                email: "test@example.com"
            });
            showResult('direct-email-result', result);
        }

        async function testDirectSearch() {
            const result = await makeRequest('/api/monday/search-items', 'POST', {
                boardId: 123,
                term: "test"
            });
            showResult('direct-search-result', result);
        }

        async function testDirectColumn() {
            const result = await makeRequest('/api/monday/update-column', 'POST', {
                boardId: 123,
                itemId: 456,
                columnValues: '{"status": "done"}'
            });
            showResult('direct-column-result', result);
        }

        async function testDirectSchema() {
            const result = await makeRequest('/api/monday/board-schema/123', 'GET');
            showResult('direct-schema-result', result);
        }
    </script>
</body>
</html> 